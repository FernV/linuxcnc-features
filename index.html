<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Linuxcnc-features by FernV</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/main.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>

      <header>
        <h1>Linuxcnc-features</h1>
        <p>LinuxCNC Features</p>
      </header>

      <div id="banner">
        <span id="logo"></span>

        <a href="https://github.com/FernV/linuxcnc-features" class="button fork"><strong>View On GitHub</strong></a>
        <div class="downloads">
          <span>Downloads:</span>
          <ul>
            <li><a href="https://github.com/FernV/linuxcnc-features/zipball/master" class="button">ZIP</a></li>
            <li><a href="https://github.com/FernV/linuxcnc-features/tarball/master" class="button">TAR</a></li>
          </ul>
        </div>
      </div><!-- end banner -->

    <div class="wrapper">
      <nav>
        <ul></ul>
      </nav>
      <section>
        <p>LinuxCNC Features v2 - native realtime CAM for LinuxCNC</p>

<p>Welcome to this advanced version of LinuxCNC-Features.</p>

<p>It is an almost complete re-write but with a few changes to your files
 it will take full advantage of all the new features
 there is also some settings you can do in the beginning of features.py</p>

<h2>
<a id="1-testing-stand-alone" class="anchor" href="#1-testing-stand-alone" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Testing Stand Alone</h2>

<p>You are invited to test it and all you have to do is make sure you have python-lxml installed.
To install python-lxml, simply open a terminal and copy the following command :</p>

<p>sudo apt-get install python-lxml</p>

<p>Download LinuxCNC-Features in the folder of your choice (recommended is ~/linuxcnc-features)</p>

<p>Make sure features.py is executable</p>

<p>Open a terminal in features directory and type ./features.py
(Or simply double click on it)
Default catalog is mill</p>

<p>And yes, start linuxcnc in a terminal with this command :
'linuxcnc ~/linuxcnc/configs/sim.axis/axis.ini' (not axis_mm.ini).
You can start it before or after features.py</p>

<p>Open some examples and if all is well, enjoy.</p>

<h2>
<a id="2-using-embedded" class="anchor" href="#2-using-embedded" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Using Embedded</h2>

<p>Install by copying the following lines in a terminal</p>

<ol>
<li><p>Install python-lxml
sudo apt-get install python-lxml </p></li>
<li>
<p>Create links into /usr/share/pyshared/gladevcp/ 
(change directory as required)</p>

<p>cd /usr/share/pyshared/gladevcp/
sudo ln /home/$USER/linuxcnc-features/features.py -s
sudo ln /home/$USER/linuxcnc-features/features.glade -s</p>
</li>
<li>
<p>Change hal_pythonplugin.py in /usr/share/pyshared/gladevcp/</p>

<p>sudo gedit /usr/share/pyshared/gladevcp/hal_pythonplugin.py</p>

<p>Add this new line anywhere
    from features import Features</p>
</li>
<li>
<p>Change hal_python.xml in /usr/share/glade3/catalogs glade3 can be glade2</p>

<p>sudo gedit /usr/share/glade3/catalogs/hal_python.xml</p>

<p>Find :  
(it is in the beginning)
Add after:
    
        
            
            
            
        
    </p>

<p>Find :  
Add after :
    </p>

<p>IMPORTANT NOTE : when linuxcnc updates, it recreates directories and if features do not load
you will have to redo steps 2, 3 and 4</p>
</li>
<li>
<p>Create links into /usr/lib/pymodules/python2.7/gladevcp</p>

<p>cd /usr/lib/pymodules/python2.7/gladevcp
sudo ln /usr/share/pyshared/gladevcp/features.py -s
sudo ln /usr/share/pyshared/gladevcp/features.glade -s</p>
</li>
<li>
<p>Open your linuxcnc ini file (follow the example in ~/linuxcnc-features/mill.ini)
I recommend you use ~/linuxcnc=features/mill.ini or ~/linuxcnc-features/lathe.ini
find 
    [DISPLAY]
    make sure DISPLAY = axis
add this line anywhere in the section
    GLADEVCP = -U --catalog=mill features.ui
or
    GLADEVCP = -U --catalog=lathe features.ui</p>

<p>in the same section, find PROGRAM_PREFIX
if it does not exist, add it and give it the value
    PROGRAM_PREFIX = ./scripts</p>

<p>find 
    [RS274NGC] section
add the path to ngc sub that will be called from your ngc scripts that you load in linuxcnc
    SUBROUTINE_PATH = ./lib</p>

<p>features.ui is allready in ~/linuxcnc-features directory</p>
</li>
</ol>

<p>You should now be able to start linuxcnc and have Features vcp embedded in axis
THE COMMAND IS : linuxcnc /home/$USER/linuxcnc-features/mill.ini</p>

<ol>
<li>
<p>Optional: Translations
Translation will work in Stand Alone AND Embedded modes</p>

<p>Make links in your system locale directories to translation files</p>

<p>cd /usr/share/locale/&lt;&lt;&gt;&gt;/LC_MESSAGES</p>

<p>sudo ln //locale/&lt;&lt;&gt;&gt;/LC_MESSAGES/linuxcnc-features.mo -s</p>

<p>Example:
cd /usr/share/locale/fr/LC_MESSAGES
sudo ln /home/$USER/linuxcnc/features/locale/fr/LC_MESSAGES/linuxcnc-features.mo -s</p>
</li>
</ol>

<h2>
<a id="3--extending-subroutines" class="anchor" href="#3--extending-subroutines" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.  Extending subroutines</h2>

<ol>
<li><p>Param subsitutions
"#param_name" can be used to substitude parameters from the feature. 
"#self_id" - unique id made of feature Name + smallest integer id. </p></li>
<li>
<p>Eval and exec<br>
"hello world!" 
everything inside &lt;eval&gt; tag will be passed
trought python's eval function. </p>

<p>print "hello world"
allmost the same but will take all printed data.</p>

<p>you can use self as feature's self.</p>
</li>
<li>
<p>Including Gcode
G-code ngc files can be included by using one of the following functions:</p>

<p>[DEFINITIONS]
content = 
    self.include_once("rotate-xy.ngc")
    self.include("rotate-xy.ngc")</p>
</li>
<li>
<p>Data types
[SUBROUTINE] type should be lower case, short, without space. Ex : circle, rect, probe-dn</p>

<p>Params types are : string, float, int, bool (or boolean), header (or hdr), combo, items
Note : you can change string, float and int types on the fly with the context menu. 
This is usefull with variables</p>

<p>when using a value like # use string because if will evaluate to 0 if int used or 0.0 if float</p>

<p>Examples in ini/mill/fv_circle.ini and others</p>

<p>Note : icons and images only need name.ext</p>
</li>
</ol>

<hr>
      </section>
      <footer>
        <p>Project maintained by <a href="https://github.com/FernV">FernV</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
